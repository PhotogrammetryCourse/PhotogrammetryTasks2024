// Убедитесь что название PR соответствует шаблону:
// Task02 <Имя> <Фамилия> <ВУЗ>

// Проверьте что обе ветки PR - task02 (отправляемая из вашего форкнутого репозитория и та в которую вы отправляете PR)

# Перечислите идеи и коротко обозначьте мысли которые у вас возникали по мере выполнения задания, в частности попробуйте ответить на вопросы:

1) Зачем фильтровать матчи, если потом мы запускаем устойчивый к выбросам RANSAC и отфильтровываем шумные сопоставления?
    
    Фильтрация дешевле RANSAC'a, поэтому мы отфильтровываем много точек за дешево, а затем уже точно находим нужные более тяжеловесным алгоритмом.

2) Cluster filtering довольно хорошо работает и без Ratio test. Однако, если оставить только Cluster filtering, некоторые тесты начнут падать. Почему так происходит? В каких случаях наоборот, не хватает Ratio test и необходима дополнительная фильтрация?

   Без K-Ratio test у нас слишком много дескрипторов, которые соответствуют не тем точкам на второй картинке (попросту из-за близости метрик), эти дескрипторы легко отфильтровываются K-Ratio,
   однако для ClusterFiltering - это проблема, т.к. эти ложные дескрипторы по сути заполняют окрестность и вместо того, чтобы проверять, лежит ли образ точки в окрестности с образами её соседей, 
   мы проверяем, лежит ли образ точки в окрестности с ложными образами. (В папке report лежит картинка `1.png`, которая иллюстрирует, что я имею в виду:
   у жёлтых точек метрика чуть хуже, поэтому они проигрывают неверным красным образам, но могут быть отфильтрованы k-ratio test)

3) С какой проблемой можно столкнуться при приравнивании единице элемента H33 матрицы гомографии? Как ее решить?

   Если этот элемент равен нулю, то проблема. Мы говорим, что элемент (3,3) равен 1, т.к. по сути мы ищем решение системы уравнений с 9 неизвестными и лишь 8 уравнениями, поэтому фактически мы на него делим.
   Если же этот элемент равен нулю, то тут возникает проблема. Однако, если я правильно помню, то это весьма частный случай, когда точка переводится в начало координат. Т.е. говоря в практическом смысле мы 
   хотим пересекающиеся прямые перевести в параллельные (перспективное преобразование при взгляде на рельсы, например).
   В этом случае можно аппроксимировать решение при помощи сингулярного разложения (SVD)

4) Какой подвох таится в попытке склеивать большие панорамы и ортофото методом, реализованным в данной домашке? (Для интуиции можно посмотреть на результат склейки, когда за корень взята какая-нибудь другая картинка)

   Видимо речь об ошибке. С ростом глубины дерева растёт накапливаемая ошибка, т.к. мы перемножаем матрицы, в которых заведомо есть небольшая ошибка (шум, неточность)

5) Как можно автоматически построить граф для построения панорамы, чтобы на вход метод принимал только список картинок?

   Берем картинки, находим дескрипторы, затем проделываем все шаги из домашки/лекции (KNN, K-Ratio, Left-Right, Clustering, RANSAC), получаем для каждой пары картинок несколько дескрипторов. 
   Строим граф, с весами на ребрах (если общих дескрипторов у двух картинок нет, то и ребра нет). Затем оставляем остовное дерево максимальной массы

6) Если с вашей реализацией SIFT пройти тесты не получилось, напишите (если пробовали дебажить), где, как вам кажется, проблема и как вы пробовали ее решать.

7) Если есть, фидбек по заданию: какая часть больше всего понравилась, где-то слишком сложно/просто (что именно), где-то слишком мало ссылок и тд.


// Создайте PR.
// Дождитесь отработки Travis CI, после чего нажмите на зеленую галочку -> Details -> The build -> скопируйте весь лог тестирования.
// Откройте PR на редактирование (сверху справа три точки->Edit) и добавьте сюда скопированный лог тестирования внутри тега <pre> для сохранения форматирования и под спойлером для компактности и удобства:

<details><summary>Travis CI</summary><p>

<pre>
$ ./build/test_sift
$ ./build/test_matching
Running main() from /home/runner/work/PhotogrammetryTasks2023/PhotogrammetryTasks2023/libs/3rdparty/libgtest/googletest/src/gtest_main.cc
[==========] Running 22 tests from 1 test suite.
[----------] Global test environment set-up.
[----------] 22 tests from SIFT
[ RUN      ] SIFT.MovedTheSameImage
[ORB_OCV] Points detected: 500 -> 500 (in 0.021269 sec)
...
[       OK ] SIFT.HerzJesu19RotateM40 (7730 ms)
[----------] 22 tests from SIFT (12918 ms total)
[----------] Global test environment tear-down
[==========] 22 tests from 1 test suite ran. (12918 ms total)
[  PASSED  ] 22 tests.
...
</pre>

</p></details>
